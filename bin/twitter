#!/usr/bin/env node

var commander = require( 'commander' );
var OAuth     = require( 'oauth' ).OAuth;
var key       = require( '../config.json' );

var twitterOAuth = new OAuth(
	'https://api.twitter.com/oauth/request_token',
	'https://api.twitter.com/oauth/access_token',
	key.consumer.key,
	key.consumer.secret,
	'1.0A',
	null,
	'HMAC-SHA1' );

commander
	.version( '0.0.0' )

commander
	.command( 'hi' )
	.description( 'Prints hi' )
	.action( function() {
		console.log( 'Hi' );
	} );

commander
	.command( 'oauth' )
	.description( 'OAuth' )
	.action( function () {
		twitterOAuth.getOAuthRequestToken( function ( error, OAuthToken, OAuthSecret, results ) {
			var url = 'https://twitter.com/oauth/authenticate?oauth_token=' + OAuthToken;

			if ( error ) {
				console.log( error );
			} else {
				console.log( 'OAuthToken: ' + OAuthToken );
				console.log( 'OAuthSecret: ' + OAuthSecret );
				console.log( results );
				console.log( url );
			}
		} );
	} );

commander.parse( process.argv );
